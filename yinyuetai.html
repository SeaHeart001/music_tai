<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<div id="wrap">
			<div id="header">
				<div id="headerT">
					<h1 id="logo">
						<a href="javascript:;">
							<img src="img/logo.png"/>
						</a>
					</h1>
					<a href="javascript:;" id="menuBtn" class="menuBtnClos"></a>
					<div id="nav">
						<a href="javascript:;" id="searchBtn">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<form id="search">
					<input type="text" placeholder="请输入搜索内容"/>
					<input type="submit" value="搜索"/>
				</form>
				<ul id="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</div>
			
			<!--内容区-->
			<div id="C_wrap">
				<div id="content">
				<nav id="banner">
					<ul id="bannerList">
						<li >
							<a href="javascript:;" class="active">首页</a>
						</li>
						<li>
							<a href="javascript:;">MV</a>
						</li>
						<li>
							<a href="javascript:;">悦单</a>
						</li>
						<li>
							<a href="javascript:;">V榜</a>
						</li>
						<li>
							<a href="javascript:;">音悦</a>
						</li>
						<li>
							<a href="javascript:;">商城</a>
						</li>
						<li>
							<a href="javascript:;">节目</a>
						</li>
						<li>
							<a href="javascript:;">饭团</a>
						</li>
						<li>
							<a href="javascript:;">资讯</a>
						</li>
						<li>
							<a href="javascript:;">我的家</a>
						</li>
						<li>
							<a href="javascript:;">APP下载</a>
						</li>
						<li>
							<a href="javascript:;">热门应用</a>
						</li>
					</ul>					
				</nav>

				<div id="pic_wrap">
					<ul id="pic_list">
						<li>
							<a href="javascript:;">
								<img src="img/1.jpg"/>
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/2.jpg"/>
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/3.jpg"/>
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/4.jpg"/>
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/5.jpg"/>
							</a>
						</li>
					</ul>
					
					<div id="pic_nav">
						<span class="active"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>
				
				<!--tab-->
				<div class="tab">
					<header class="tab_h">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tab_nav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<!--小绿-->
						<span></span>
					</nav>
					<!--主要内容-->
					<div class="tab_wrap">
						<ul class="tab_loading"></ul>
						<ul class="tab_list">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>
										内容描述aaaaaaaaaaaaaaaaaaaa
									</span>										
								</a>
								
								<div class="ice">
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>								
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>															
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>						
						</ul>
						<ul class="tab_loading"></ul>
					</div>
					
				</div>
				<div class="tab">
					<header class="tab_h">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tab_nav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<!--小绿-->
						<span></span>
					</nav>
					
					<div class="tab_wrap">
						<ul class="tab_loading"></ul>
						<ul class="tab_list">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>
										内容描述aaaaaaaaaaaaaaaaaaaa
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>								
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>															
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>						
						</ul>
						<ul class="tab_loading"></ul>
					</div>
					
				</div>
				<div class="tab">
					<header class="tab_h">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tab_nav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<!--小绿-->
						<span></span>
					</nav>
					
					<div class="tab_wrap">
						<ul class="tab_loading"></ul>
						<ul class="tab_list">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>
										内容描述aaaaaaaaaaaaaaaaaaaa
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>								
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
								
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>															
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								
								<div class="ice">
									
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>						
						</ul>
						<ul class="tab_loading"></ul>
					</div>
					
				</div>
				<div class="tab">
					<header class="tab_h">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tab_nav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<!--小绿-->
						<span></span>
					</nav>
					<!--图片列表-->
					<div class="tab_wrap">
						<ul class="tab_loading"></ul>
						<ul class="tab_list">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>
										内容描述aaaaaaaaaaaaaaaaaaaa
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>								
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>															
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>
										内容描述
									</span>										
								</a>
								<!--ice-->
								<div class="ice">
									<!--左边-->
									<a href="javascript:;" class="ice_left">
										<span class="ice_pic"></span>
										<span>9167</span>
									</a>
									<!--右边-->
									<a href="javascript:;" class="ice_right">
										<span class="ice_pic"></span>
										<span>6</span>
									</a>
								</div>																
							</li>						
						</ul>
						<ul class="tab_loading"></ul>
					</div>
					
				</div>
				
				
				
			</div>
			</div>
		</div>
		<div class="scrollbar">
				
		</div>
	</body>
	<script type="text/javascript" src="js/transformCss.js"></script>
	<script type="text/javascript" src="js/drag.js"></script>
	<script type="text/javascript">
		document.addEventListener('touchstart',function(ev){
			ev.preventDefault();
		});
		
		
		
		//IIFE
		(function(){
			var width = document.documentElement.clientWidth/16;
			var styleN = document.createElement('style');
			styleN.innerHTML = 'html{font-size: '+ width +'px !important;}';
			document.head.appendChild(styleN);
		})();
		
		
		
		//无缝滑屏		
		function changePic(){
			var wrap = document.getElementById('pic_wrap');
			var list = document.getElementById('pic_list');
			transformCss(list,'translateZ',0.01);
			list.innerHTML += list.innerHTML;
			var liNodes = document.querySelectorAll('#pic_list li');
			var spanNodes = document.querySelectorAll('#pic_nav span');
			
			//布局元素
			var styleN = document.createElement('style');
			var cssText = '#pic_list{width: '+ liNodes.length +'00%;}';
			cssText += '#pic_list li{width: '+ 100/liNodes.length +'%;}'
			cssText += '#pic_wrap{height: '+ liNodes[0].offsetHeight +'px;}';			 			
			styleN.innerHTML = cssText;
			document.head.appendChild(styleN);
			
			
			var eleX = 0;
			var startX = 0;
			var disX = 0;
			var timer = 0;
			//定义图片索引
			var now = 0;
			
			//Y方向上手指距离
			var startY = 0;
			//防抖动
			//判断用户手指第一次move
			var isFirst = true;
			//是否执行X方向上的逻辑
			var isX = true;
			
			
			
			
			wrap.addEventListener('touchstart',function(ev){
				var touch = ev.changedTouches[0];
				//关定时器
				clearInterval(timer);
				//清除过渡
				list.style.transition = 'none';
				
				//无缝滑屏
				var left = transformCss(list,'translateX');
				now = Math.round(-left/document.documentElement.clientWidth);
				if(now == 0){
					now = spanNodes.length;
				}else if(now == liNodes.length-1){
					now = spanNodes.length - 1;
				};
				//跳转过程
				transformCss(list,'translateX',-now*document.documentElement.clientWidth)
								
				startX = touch.clientX;
				eleX = transformCss(list,'translateX')
				
				startY = touch.clientY;
				
				isX = true;
				isFirst = true;
			})
			wrap.addEventListener('touchmove',function(ev){
				var touch = ev.changedTouches[0];
				//看门狗
				if(!isX){
					return;
				};
				
				//现在手指位置
				var nowX = touch.clientX;
				disX = nowX - startX;
				var nowY = touch.clientY;
				var disY = nowY - startY;
				
				if(isFirst){
					isFirst = false;
					if(Math.abs(disY)>Math.abs(disX)){
						isX = false;
					};
				}
				
				//元素当前位置
				transformCss(list,'translateX',eleX + disX)
			})
			wrap.addEventListener('touchend',function(){
				var left = transformCss(list,'translateX');
				now = Math.round(-left/document.documentElement.clientWidth);
				
				//限定now范围
				if(now<0){
					now = 0
				}else if(now > liNodes.length-1){
					now = liNodes.length-1
				}
				
				list.style.transition = '0.5s';
				transformCss(list,'translateX',-now * document.documentElement.clientWidth)
				
				//同步小圆点
				for (var i=0;i<spanNodes.length;i++) {
					spanNodes[i].className = '';
				}
				spanNodes[now%spanNodes.length].className = 'active';
				
				auto();
			})
			
			//自动轮播
			auto();
			//模拟now
			function auto(){
				clearInterval(timer);
				timer = setInterval(function(){
					//空白区域
					if(now == liNodes.length-1){
						now = spanNodes.length-1;
					};
					list.style.transition = 'none';
					transformCss(list,'translateX',-now* document.documentElement.clientWidth)
					
					setTimeout(function(){
						now++;
						list.style.transition = '0.5s';
						transformCss(list,'translateX',-now* document.documentElement.clientWidth)
						//同步小圆点
						for (var i=0;i<spanNodes.length;i++) {
							spanNodes[i].className = '';
						}
						spanNodes[now%spanNodes.length].className = 'active';
					},20);
					
				},1000)
				
			}
			
			
		};
		
		//点击变色
		function changeColor(){
			
			var lis = document.querySelectorAll('#bannerList li a');
			//给每一个li添加touchend事件
			for (var i=0;i<lis.length;i++) {
				//误触
				lis[i].addEventListener('touchmove',function(){
					if(!this.ismove){
						this.ismove = true;
					}
				});
				lis[i].addEventListener('touchend',function(){
					if(!this.ismove){
						//清除每一个li上面的样式
						for(var j=0;j<lis.length;j++){
							lis[j].className = '';
						}
						this.className = 'active';	
						
					}
					//重新置回
					this.ismove = false;
					
				});
			}
		
		};	
	
		
		//导航滑屏效果
		
		function drag(){
			var banner = document.getElementById('banner');
			var bannerList = document.getElementById('bannerList');
			transformCss(bannerList,'translateZ',0.01);
			var startX = 0;
			var eleX = 0;
			
			//上一点的位置和时间
			var lastPoint = 0;
			var lastTime = 0;
			//现在的位置和时间
			var nowPoint = 0;
			var nowTime = 0;
			//位移差和时间差
			var disPoint = 0;
//			var disTime = 1;
			var disTime = 0;
			
			
			
			banner.addEventListener('touchstart',function(ev){
				var touch = ev.changedTouches[0];
				
				bannerList.style.transition = 'none';
				
				startX = touch.clientX;
				eleX = transformCss(bannerList,'translateX');
					
				//上一点的位置和时间
				lastPoint = eleX;
				lastTime = new Date().getTime();//毫秒
				
				//清空速度
				disPoint = 0;
			});
			banner.addEventListener('touchmove',function(ev){
				var touch = ev.changedTouches[0];
				var nowX = touch.clientX;
				var disX = nowX - startX;
				var translateX = eleX+disX;
				var minWidth = document.documentElement.clientWidth-bannerList.offsetWidth;
				var scale = 0;
				if(translateX > 0){

					scale = 0.9 - translateX/document.documentElement.clientWidth;
					translateX = translateX * scale;
					
				}else if(translateX < minWidth){
					var over = minWidth - translateX;
					scale = 0.9 - over/document.documentElement.clientWidth;
					
					translateX = minWidth - over*scale;
				};
				
				transformCss(bannerList,'translateX',translateX);
				
				//现在的位置和时间
				nowPoint = translateX;
				nowTime = new Date().getTime();
				
				//位移差和时间差
				disPoint = nowPoint - lastPoint;
				disTime = nowTime - lastTime;
				
			});
			
			//快速滑屏和回弹
			banner.addEventListener('touchend',function(ev){
				var touch = ev.changedTouches[0];
				//速度

				var speed = disPoint / (nowTime - lastTime) ;
				var target = transformCss(bannerList,'translateX') + speed*100;
				var minWidth = document.documentElement.clientWidth-bannerList.offsetWidth;
				
				//回弹效果
				//cubic-bezier(.03,1.58,.73,1.5)
				var bezier = '';
				if(target>0){
					target = 0;
					bezier = 'cubic-bezier(.03,1.58,.73,1.5)';
				}else if(target < minWidth){
					target = minWidth;
					bezier = 'cubic-bezier(.03,1.58,.73,1.5)';
				};
								
				bannerList.style.transition = '0.5s '+ bezier;
				transformCss(bannerList,'translateX',target);
				
			});
			
			
		};
		
		//获取焦点yu失去焦点
		
		function changeFocus(){
			var inputN = document.querySelector('#search input[type="text"]');
			
			inputN.addEventListener('touchstart',function(ev){
				//获取焦点
				this.focus();
				//取消冒泡				
				ev.stopPropagation();
			});
			document.addEventListener('touchstart',function(){
				//失去焦点
				inputN.blur();
			});		
		};
		
		//菜单按钮变换
		
		function changeMenu(){
			var menuBtn = document.getElementById('menuBtn');
			var mask = document.getElementById('mask');
			
			menuBtn.addEventListener('touchstart',function(ev){
				if(menuBtn.className == 'menuBtnClos'){
					menuBtn.className = 'menuBtnOpen';
					mask.style.display = 'block';
				}else if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClos';
					mask.style.display = 'none';
				}
				//取消冒泡
				ev.stopPropagation();
			});
			
			document.addEventListener('touchstart',function(){
				if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClos';
					mask.style.display = 'none';
				}
			});
			mask.addEventListener('touchstart',function(ev){
				ev.stopPropagation();
			})
			
		}
		
		//tab
		function tab(){
			var wrap = document.querySelectorAll('.tab_wrap');
			var nav = document.querySelectorAll('.tab_nav');
			
			var translateX = nav[0].offsetWidth;
			
			for (var i=0;i<wrap.length;i++) {
				//把主题内容置回
//				transformCss(wrap[i],'translateX',-translateX);
				move(wrap[i],nav[i]);
			};
			function move(wrap,nav){
				transformCss(wrap,'translateZ',0.01);
				//把主题内容置回
				transformCss(wrap,'translateX',-translateX);
				
				//简单的拖拽
				var startX = 0;
				var eleX = 0;
				//防抖动
				var startY = 0;
				var isFirst = true;
				var isX = true;
				//load标识
				var isLoad = false;
				var loadings = wrap.querySelectorAll('.tab_loading');
				
				//小绿
				var smallG = nav.querySelector('span');		
				transformCss(smallG,'translateZ',0.01);
				//模拟a下标索引
				var now = 0;
				var aNodes = nav.querySelectorAll('a');
				
				wrap.addEventListener('touchstart',function(ev){
					var touch = ev.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					wrap.style.transition = 'none';
					startX = touch.clientX;
					eleX = transformCss(wrap,'translateX');
					startY = touch.clientY;
					
					isFirst = true;
					isX = true;
				});
				wrap.addEventListener('touchmove',function(ev){
					var touch = ev.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					if(!isX){
						return;
					};
					var nowX = touch.clientX;
					var disX = nowX - startX;
					var nowY = touch.clientY;
					var disY = nowY - startY;
					
					//防抖动
					if(isFirst){
						isFirst = false;
						if(Math.abs(disY)> Math.abs(disX)){
							isX = false;
						};
					};
										
					transformCss(wrap,'translateX',eleX + disX);
					
					//手指划过1/2，跳到load上
					
					if(Math.abs(disX) >translateX/2){
						//标识
						isLoad = true;
						
						var target = disX > 0?0:-2*translateX;	
						wrap.style.transition = '0.5s';
						transformCss(wrap,'translateX',target);
						
						//过渡彻底结束之后，load出来
						//兼容
						wrap.addEventListener('transitionEnd',transitionEnd);
						wrap.addEventListener('webkitTransitionEnd',transitionEnd);
						
					};
					function transitionEnd(){
						//解绑
						wrap.removeEventListener('transitionEnd',transitionEnd);
						wrap.removeEventListener('webkitTransitionEnd',transitionEnd);
						
						//load出来
						for (var i=0;i<loadings.length;i++) {
							loadings[i].style.opacity = '1';
						};
						
						//处理小绿
						if(disX < 0){
							now = now + 1;
						}else{
							now = now -1;
						}
						//范围
						if(now < 0){
							now = aNodes.length-1;
						}else if(now > aNodes.length-1){
							now = 0;
						}
						
						
						smallG.style.transition = '0.5s';
						transformCss(smallG,'translateX', aNodes[now].offsetLeft);
						
						//数据拿回来
						setTimeout(function(){
							
							wrap.style.transition = 'none';
							transformCss(wrap,'translateX',-translateX);
							isLoad = false;
							for (var i=0;i<loadings.length;i++) {
								loadings[i].style.opacity = 0;
							};
						},2000);
						
					};

					
				});
				wrap.addEventListener('touchend',function(ev){
					var touch = ev.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					var nowX = touch.clientX;
					var disX = nowX - startX;
					
					//没有过1/2
					if(Math.abs(disX) < translateX/2){
						wrap.style.transition = '0.5s';
						transformCss(wrap,'translateX',-translateX);
					};
					
				});
				
			};
		};
		
		//内容区竖向滑动
		function Cwrap(){
			var Cwrap=document.getElementById('C_wrap')
			var content=document.getElementById('content')
			var scrollbar=document.querySelector('.scrollbar')
			var scale=document.documentElement.clientHeight/content.offsetHeight
			scrollbar.style.height=document.documentElement.clientHeight*scale+'px'
			var callback={
			start:function(){
				scrollbar.style.opacity='1'
			},
			move:function(){
				scrollbar.style.opacity='1'
				var dis=transformCss(content,'translateY')*scale
				transformCss(scrollbar,'translateY',-dis)
			},
			end:function(){
				scrollbar.style.opacity='0'
			}
		
		};
			Cdrag(Cwrap,callback);
		}
		
		window.onload = function(){
			changeMenu();
			changeFocus();
			drag();
			changeColor();
			changePic();
			tab();
			Cwrap();
		}
		
	</script>
</html>
